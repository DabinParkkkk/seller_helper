<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>로그인</title>
<style>
    body { font-family: 'Pretendard'; background: #f8f9fa; text-align:center; }
    .box {
        width: 350px; margin: 120px auto; background: white;
        padding: 30px; border-radius: 16px; box-shadow: 0 8px 25px rgba(0,0,0,0.07);
    }
    input, button {
        width: 80%; padding: 12px; margin-top: 10px;
        border-radius: 10px; border:1px solid #ccc;
    }
    button { background:#ffd84d; border:none; font-weight:600; cursor:pointer; }
</style>
</head>
<body>

<div class="box">
    <h2>로그인</h2>
    <input id="id" placeholder="아이디(이메일)">
    <input id="pw" type="password" placeholder="비밀번호">
    <button onclick="login()">로그인</button>
    <p id="result"></p>
</div>

<script>
async function login(){
    const email = document.getElementById("id").value;
    const password = document.getElementById("pw").value;

    const res = await fetch("/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email: email, password: password })
    });

    const text = await res.text();

    // 에러 메시지인 경우
    if (
        text.includes("존재하지 않는") ||
        text.includes("비밀번호") ||
        text.includes("error")
    ) {
        document.getElementById("result").innerHTML = text;
        return;
    }

    // 로그인 성공 → main.html 이동
    localStorage.setItem("token", text);  // 토큰 저장(옵션)
    window.location.href = "/index.html";
}
</script>

</body>
</html>
